---
title: Reading in data quickly into R
author: Matt Russell
date: '2022-05-22'
slug: []
categories:
  - Analytics
tags:
  - analytics
  - Data science
  - data import
  - data management
---

<script src="{{< blogdown/postref >}}index_files/header-attrs/header-attrs.js"></script>


<center>
<p><img src="datass.jpg" width="500" /></p>
</center>
<div id="section" class="section level2">
<h2></h2>
<p>If you’re like me, you work with a lot of data files in your daily analytical work. Despite the increase in cloud computing, reading in files locally to the machine your working on is common.</p>
<p>You want a rapid summary of your data and don’t want to wait forever for your computer to read in the file you’re working with. To do this, you want to use functions that are efficient and effective for working with large amounts of data.</p>
<p>If you’re using R, there are several functions to read in data depending on your needs. This post summarizes three common functions in R that read in data and compares their speed.</p>
</div>
<div id="the-plant-dictionary-data-set" class="section level2">
<h2>The plant dictionary data set</h2>
<p>The US Department of Agriculture’s <a href="https://www.fia.fs.fed.us/">Forest Inventory and Analysis program</a> collects information on the status and trends of forests across the country. The <em>REF_PLANT_DICTIONARY</em> data table is an important one contained on the <a href="https://apps.fs.usda.gov/fia/datamart/CSV/datamart_csv.html">FIA Datamart webpage</a>.</p>
<p>This data table contains 81,489 rows and 39 variables and is stored as a comma separated data file (i.e., a .csv format). The tables contains information on all of the plant species recorded in the FIA database:</p>
<pre><code>## # A tibble: 6 x 39
##        CN SYMBOL_TYPE SYMBOL SCIENTIFIC_NAME       NEW_SYMBOL NEW_SCIENTIFIC_NA~
##     &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;  &lt;chr&gt;                 &lt;chr&gt;      &lt;chr&gt;             
## 1 5.04e14 Old         NOFR3  Nothoscordum fragrans &quot;NOBO&quot;     &quot;Nothoscordum bor~
## 2 5.04e14 Old         NOGR4  Nothoscordum gracile  &quot;NOBO&quot;     &quot;Nothoscordum bor~
## 3 5.04e14 Species     NOGR3  Nothoscordum gracile  &quot;&quot;         &quot;&quot;                
## 4 5.04e14 Old         NOIN6  Nothoscordum inodorum &quot;NOBO&quot;     &quot;Nothoscordum bor~
## 5 5.04e14 Old         NOIN3  Nothoscordum inodorum &quot;ALNE3&quot;    &quot;Allium neapolita~
## 6 5.04e14 Species     NOTE2  Nothoscordum texanum  &quot;&quot;         &quot;&quot;                
## # ... with 33 more variables: COMMON_NAME &lt;chr&gt;, CATEGORY &lt;chr&gt;, FAMILY &lt;chr&gt;,
## #   GROWTH_HABIT &lt;chr&gt;, DURATION &lt;chr&gt;, US_NATIVITY &lt;chr&gt;,
## #   STATE_DISTRIBUTION &lt;chr&gt;, STATE_AND_PROVINCE &lt;chr&gt;,
## #   SCIENTIFIC_NAME_W_AUTHOR &lt;chr&gt;, GENERA_BINOMIAL_AUTHOR &lt;chr&gt;,
## #   TRINOMIAL_AUTHOR &lt;chr&gt;, QUADRINOMIAL_AUTHOR &lt;chr&gt;, XGENUS &lt;chr&gt;,
## #   GENUS &lt;chr&gt;, XSPECIES &lt;chr&gt;, SPECIES &lt;chr&gt;, SSP &lt;chr&gt;, XSUBSPECIES &lt;chr&gt;,
## #   SUBSPECIES &lt;chr&gt;, VAR &lt;chr&gt;, XVARIETY &lt;chr&gt;, VARIETY &lt;chr&gt;, ...</code></pre>
<p>The data set is a large enough one that we will see differences in the speed at which different functions read in the data.</p>
<div id="read.csv" class="section level3">
<h3>read.csv()</h3>
<p>One of the most common functions for reading in data in R is <code>read.csv()</code>. This function is available in the base version of R and is used regularly for reading in data:</p>
<pre class="r"><code>read.csv(&#39;C://Users//MyUser//Data//REF_PLANT_DICTIONARY.csv&#39;)</code></pre>
</div>
<div id="read_csv" class="section level3">
<h3>read_csv()</h3>
<p>There’s a slight difference in the name of this function, but it leads to a big impact. The <code>read_csv()</code> function is available from the <strong>readr</strong> package, one of the many packages available in the <strong>tidyverse</strong> megapackage. The only difference is using the underscore instead of a period.</p>
<p>The primary difference in the <code>read_csv()</code> function is that instead of treating the data as a data frame, it treats it as a tibble, the tidyverse’s implementation of a data set in R:</p>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre class="r"><code>read_csv(&#39;C://Users//MyUser//Data//REF_PLANT_DICTIONARY.csv&#39;)</code></pre>
</div>
<div id="fread" class="section level3">
<h3>fread()</h3>
<p>The <strong>data.table</strong> package is well known to work well with large data sets. For reading in .csv files, the <code>fread()</code> function works well. Like the <code>read.csv()</code> function, after it reads in the data it is stored as a data frame:</p>
<pre class="r"><code>library(data.table)</code></pre>
<pre class="r"><code>fread(&#39;C://Users//MyUser//Data//REF_PLANT_DICTIONARY.csv&#39;)</code></pre>
<p>To compare speeds of the different function, we can run the <code>system.time()</code> function</p>
<pre class="r"><code>system.time(read.csv(&#39;C://Users//MyUser//Data//REF_PLANT_DICTIONARY.csv&#39;))
system.time(read_csv(&#39;C://Users//MyUser//Data//REF_PLANT_DICTIONARY.csv&#39;))
system.time(fread(&#39;C://Users//MyUser//Data//REF_PLANT_DICTIONARY.csv&#39;))</code></pre>
<pre><code>##    user  system elapsed 
##    2.05    0.08    2.16</code></pre>
<pre><code>##    user  system elapsed 
##    0.92    0.15    0.55</code></pre>
<pre><code>##    user  system elapsed 
##    0.62    0.10    0.42</code></pre>
<p>We can see that the <code>read.csv()</code> function takes the longest time to read in the data, followed by <code>read_csv()</code>. The <code>fread()</code> function takes the shortest time to read in the data. (For reference, I’m running an i7 processor with four cores on a laptop that’s four years old.)</p>
<p>There are pros and cons for each of the functions depending on your needs. For speed, the <code>fread()</code> function is quickest to get data read into your session. Analysts that work within the tidyverse suite of packages will find the <code>read_csv()</code> function advantageous because it imports and stores tables as tibbles. I’ve rarely had an issue with the <code>read.csv()</code> function, and it’s considered the standard function for getting data into R.</p>
<p>Depending on your needs and the size of the data you’re working with, consider implementing these functions for reading in data into R in the future.</p>
<p>–</p>
<p><em>By Matt Russell</em></p>
<p><em><a href="mailto:matt@arbor-analytics.com">Email Matt</a> with any questions or comments. Sign up for <a href="https://mailchi.mp/d96897dc0f46/arbor-analytics">The Landing</a> for monthly in-depth analysis on data and analytics in the forest products industry.</em></p>
</div>
</div>
