library(lubridate)
library(tidycensus)
library(urbnmapr)
library(readxl)
library(devtools)
library(usmap)
library(patchwork)
library(maps)
# Data from: https://data.census.gov/cedsci/table?q=house%20heating%20fuel%20by%20state&tid=ACSDT1Y2010.B25040&moe=false
fuel <- read_csv("C://Users//matt//Documents//Arbor//Projects//Blog//fuel.csv") %>%
pivot_longer(Alabama:`Puerto Rico`, names_to = "State", values_to = "n_homes")
fuel_2021 <- fuel %>%
filter(Type == "Total:" & Year == 2021)
fuel_summ <- fuel %>%
filter(!Type == "Total:") %>%
group_by(State, Year) %>%
mutate(Pct = n_homes / sum(n_homes) * 100)
states_map <- map_data("state")
fuel_map <- fuel_summ %>%
mutate(region = tolower(State)) %>%
filter(!State %in% c("Puerto Rico", "District of Columbia") &
Year == 2021 &
Type == "Wood")
fuel_map2 <- inner_join(states_map, fuel_map)
p.map <-  ggplot(fuel_map2, mapping = aes(long, lat, group = group,
fill = Pct)) +
geom_polygon(color = "black", size = 0.25) +
coord_map(projection = "albers", lat0 = 39, lat1 = 45) +
scale_fill_gradient(name="Homes heated \nwith wood (%)", low="white", high="red") +
labs(caption = "Source: American Community Survey , 2021") +
theme(panel.background = element_rect(fill = "NA"),
axis.title = element_blank(),
axis.ticks = element_blank(),
axis.text = element_blank(),
axis.line = element_blank(),
legend.position = c(0.9, 0.4))
p.map
View(fuel_map2)
View(fuel_map)
sum(fuel_map$n_homes)
View(fuel)
View(fuel_summ)
fuel_summ2 <- fuel %>%
filter(!Type == "Total:") %>%
group_by(Type) %>%
mutate(Pct = n_homes / sum(n_homes) * 100)
View(fuel_summ2)
View(fuel_summ2)
fuel_summ <- fuel %>%
filter(!Type == "Total:") %>%
group_by(State, Year) %>%
mutate(Pct = n_homes / sum(n_homes) * 100)
fuel_summ2 <- fuel %>%
filter(!Type == "Total:") %>%
group_by(Type) %>%
mutate(Pct = n_homes / sum(n_homes) * 100)
fuel_summ2 <- fuel %>%
filter(!Type == "Total:") %>%
group_by(Type) %>%
mutate(sum_homes = sum(n_homes) * 100)
fuel_summ <- fuel %>%
filter(!Type == "Total:") %>%
group_by(State, Year) %>%
mutate(Pct = n_homes / sum(n_homes) * 100)
fuel_summ2 <- fuel %>%
filter(Type == "Total:" & Year == 2021)
group_by(Type) %>%
mutate(sum_homes = sum(n_homes) * 100)
fuel_summ <- fuel %>%
filter(!Type == "Total:") %>%
group_by(State, Year) %>%
mutate(Pct = n_homes / sum(n_homes) * 100)
fuel_summ2 <- fuel %>%
filter(!Type == "Total:" & Year == 2021)
group_by(Type) %>%
mutate(sum_homes = sum(n_homes) * 100)
# Chunk 1
library(tidyverse)
library(lubridate)
library(tidycensus)
library(urbnmapr)
library(readxl)
library(devtools)
library(usmap)
library(patchwork)
library(maps)
# Chunk 2
# Data from: https://data.census.gov/cedsci/table?q=house%20heating%20fuel%20by%20state&tid=ACSDT1Y2010.B25040&moe=false
fuel <- read_csv("C://Users//matt//Documents//Arbor//Projects//Blog//fuel.csv") %>%
pivot_longer(Alabama:`Puerto Rico`, names_to = "State", values_to = "n_homes")
# Chunk 3
fuel_2021 <- fuel %>%
filter(Type == "Total:" & Year == 2021)
fuel_summ <- fuel %>%
filter(!Type == "Total:") %>%
group_by(State, Year) %>%
mutate(Pct = n_homes / sum(n_homes) * 100)
fuel_summ2 <- fuel %>%
filter(!Type == "Total:" & Year == 2021)
group_by(Type) %>%
mutate(sum_homes = sum(n_homes) * 100)
View(fuel)
View(fuel_summ2)
fuel_summ2 <- fuel %>%
ungroup() %>%
filter(!Type == "Total:" & Year == 2021)
fuel_summ2 <- fuel %>%
filter(!Type == "Total:" & Year == 2021) %>%
group_by(Type) %>%
mutate(sum_homes = sum(n_homes) * 100)
View(fuel_summ2)
# Chunk 1
library(tidyverse)
library(lubridate)
library(tidycensus)
library(urbnmapr)
library(readxl)
library(devtools)
library(usmap)
library(patchwork)
library(maps)
# Chunk 2
# Data from: https://data.census.gov/cedsci/table?q=house%20heating%20fuel%20by%20state&tid=ACSDT1Y2010.B25040&moe=false
fuel <- read_csv("C://Users//matt//Documents//Arbor//Projects//Blog//fuel.csv") %>%
pivot_longer(Alabama:`Puerto Rico`, names_to = "State", values_to = "n_homes")
# Chunk 3
fuel_2021 <- fuel %>%
filter(Type == "Total:" & Year == 2021)
# Chunk 4
fuel_summ <- fuel %>%
filter(!Type == "Total:") %>%
group_by(State, Year) %>%
mutate(Pct = n_homes / sum(n_homes) * 100)
fuel_summ2 <- fuel %>%
filter(!Type == "Total:" & Year == 2021) %>%
group_by(Type) %>%
mutate(sum_homes = sum(n_homes) * 100)
View(fuel_summ2)
fuel_summ <- fuel %>%
filter(!Type == "Total:") %>%
group_by(State, Year) %>%
mutate(Pct = n_homes / sum(n_homes) * 100)
fuel_summ2 <- fuel %>%
#filter(!Type == "Total:" & Year == 2021) %>%
group_by(Type) %>%
mutate(sum_homes = sum(n_homes) * 100)
fuel_summ2 <- fuel %>%
filter(Year == 2021) %>%
group_by(Type) %>%
mutate(sum_homes = sum(n_homes) * 100)
View(fuel_summ2)
View(fuel_2021)
fuel_summ2 <- fuel_2021 %>%
group_by(Type) %>%
mutate(sum_homes = sum(n_homes) * 100)
View(fuel_summ2)
sum(fuel_2021$n_homes)
fuel_2021_wood <- fuel %>%
filter(Type == "Wood" & Year == 2021)
sum(fuel_2021_wood$n_homes)
fuel_map %>%
kbl(caption = "Number and percentage of home heating with wood.") %>%
kable_paper("hover", full_width = F)
blogdown:::preview_site()
fuel_map_trim <- fuel_map %>%
select(State, n_homes, Pct) %>%
rename(n_homes = Number,
Pct = Percent)
# Chunk 1
library(tidyverse)
library(lubridate)
library(tidycensus)
library(urbnmapr)
library(readxl)
library(devtools)
library(usmap)
library(patchwork)
library(maps)
library(kableExtra)
# Chunk 2
# Data from: https://data.census.gov/cedsci/table?q=house%20heating%20fuel%20by%20state&tid=ACSDT1Y2010.B25040&moe=false
fuel <- read_csv("C://Users//matt//Documents//Arbor//Projects//Blog//fuel.csv") %>%
pivot_longer(Alabama:`Puerto Rico`, names_to = "State", values_to = "n_homes")
# Chunk 3
fuel_2021 <- fuel %>%
filter(Type == "Total:" & Year == 2021)
fuel_2021_wood <- fuel %>%
filter(Type == "Wood" & Year == 2021)
# Chunk 4
fuel_summ <- fuel %>%
filter(!Type == "Total:") %>%
group_by(State, Year) %>%
mutate(Pct = n_homes / sum(n_homes) * 100)
sum(fuel_2021$n_homes)
fuel_summ2 <- fuel_2021 %>%
group_by(Type) %>%
mutate(sum_homes = sum(n_homes) * 100)
# Chunk 5
states_map <- map_data("state")
fuel_map <- fuel_summ %>%
mutate(region = tolower(State)) %>%
filter(!State %in% c("Puerto Rico", "District of Columbia") &
Year == 2021 &
Type == "Wood")
fuel_map2 <- inner_join(states_map, fuel_map)
p.map <-  ggplot(fuel_map2, mapping = aes(long, lat, group = group,
fill = Pct)) +
geom_polygon(color = "black", size = 0.25) +
coord_map(projection = "albers", lat0 = 39, lat1 = 45) +
scale_fill_gradient(name="Homes heated \nwith wood (%)", low="white", high="red") +
labs(caption = "Source: American Community Survey , 2021") +
theme(panel.background = element_rect(fill = "NA"),
axis.title = element_blank(),
axis.ticks = element_blank(),
axis.text = element_blank(),
axis.line = element_blank(),
legend.position = c(0.9, 0.4))
p.map
fuel_map_trim <- fuel_map %>%
select(State, n_homes, Pct) %>%
rename(n_homes = Number,
Pct = Percent)
fuel_map_trim <- fuel_map %>%
select(State, n_homes, Pct) %>%
rename(Number = n_homes ,
Percent = Pct)
View(fuel_map_trim)
fuel_map_trim <- fuel_map %>%
ungroup() %>%
select(State, n_homes, Pct) %>%
rename(Number = n_homes ,
Percent = Pct)
fuel_map %>%
kbl(caption = "Number and percentage of home heating with wood, 2021.") %>%
kable_paper("hover", full_width = F)
fuel_map_trim %>%
kbl(caption = "Number and percentage of home heating with wood, 2021.") %>%
kable_paper("hover", full_width = F)
fuel_map_trim[order(fuel_map_trim$Percent, decreasing=TRUE),] %>%
kbl(caption = "Number and percentage of home heating with wood, 2021.") %>%
kable_paper("hover", full_width = F)
fuel_map_trim <- fuel_map %>%
ungroup() %>%
select(State, n_homes, Pct) %>%
rename(Number = n_homes ,
Percent = Pct) %>%
mutate(Pecent = round(Percent, 1))
fuel_map_trim[order(fuel_map_trim$Percent, decreasing=TRUE),] %>%
kbl(caption = "Number and percentage of home heating with wood, 2021.") %>%
kable_paper("hover", full_width = F)
fuel_map_trim <- fuel_map %>%
ungroup() %>%
select(State, n_homes, Pct) %>%
rename(Number = n_homes ,
Percent = Pct) %>%
mutate(Percent = round(Percent, 1))
fuel_map_trim[order(fuel_map_trim$Percent, decreasing=TRUE),] %>%
kbl(caption = "Number and percentage of home heating with wood, 2021.") %>%
kable_paper("hover", full_width = F)
fuel_wood <- fuel %>%
filter(Type == "Wood")
fuel_wood_all <- fuel_wood %>%
group_by(Year) %>%
summarize(num_homes = sum(n_homes))
p.wood <- ggplot(fuel_wood_all, aes(x = Year, y = num_homes/1000000)) +
geom_point() +
geom_line() +
labs(x = "Year",
y = "Number of US homes heated with wood (millions)",
caption = "Source: American Community Survey data, 2010-2021") +
theme(panel.background = element_rect(fill = "NA"),
axis.line = element_line(color = "black"))
p.wood
fuel_wood_all
fuel_solar <- fuel %>%
filter(Type == "Solar energy")
fuel_solar_all <- fuel_solar %>%
group_by(Year) %>%
summarize(num_homes = sum(n_homes))
p.solar <- ggplot(fuel_solar_all, aes(x = Year, y = num_homes/1000000)) +
geom_point() +
geom_line() +
labs(x = "Year",
y = "Number of US homes heated with solar (millions)",
caption = "Source: American Community Survey, 2010-2021") +
theme(panel.background = element_rect(fill = "NA"),
axis.line = element_line(color = "black"))
fuel_summ_wood <- fuel_summ %>%
filter(Type == "Wood" & Year %in% c(2011, 2021)) %>%
pivot_wider(id_cols = State, names_from = Year, values_from = Pct, values_fill = 0) %>%
mutate(pct_diff = `2021`-`2011`)
fuel_all <- fuel %>%
filter(!Type == "Total:")
fuel_all <- fuel_all %>%
group_by(Type, Year) %>%
summarize(num_homes = sum(n_homes))
fuel_all2 <- fuel_all %>%
group_by(Year) %>%
mutate(Pct = num_homes / sum(num_homes) * 100)
fuel_all3 <- fuel_all2 %>%
group_by(Year) %>%
summarize(sum_all = sum(Pct))
p.all <- ggplot(fuel_all2, aes(x = Year, y = Pct, col = Type)) +
geom_point() +
geom_line() +
facet_wrap(~Type, ncol = 3) +
labs(x = "Year",
y = "Percent of US homes by home heating type",
caption = "Source: American Community Survey, 2010-2021") +
theme(panel.background = element_rect(fill = "NA"),
axis.line = element_line(color = "black"),
legend.position = "none")
p.all
View(fuel_all2)
View(fuel_all3)
View(fuel_all2)
View(fuel_summ2)
View(fuel_all2)
View(fuel)
# Chunk 1
library(tidyverse)
library(lubridate)
library(tidycensus)
library(urbnmapr)
library(readxl)
library(devtools)
library(usmap)
library(patchwork)
library(maps)
library(kableExtra)
# Chunk 2
# Data from: https://data.census.gov/cedsci/table?q=house%20heating%20fuel%20by%20state&tid=ACSDT1Y2010.B25040&moe=false
fuel <- read_csv("C://Users//matt//Documents//Arbor//Projects//Blog//fuel.csv") %>%
pivot_longer(Alabama:`Puerto Rico`, names_to = "State", values_to = "n_homes")
# Chunk 3
fuel_2021 <- fuel %>%
filter(Type == "Total:" & Year == 2021)
fuel_2021_wood <- fuel %>%
filter(Type == "Wood" & Year == 2021)
# Chunk 4
fuel_summ <- fuel %>%
filter(!Type == "Total:") %>%
group_by(State, Year) %>%
mutate(Pct = n_homes / sum(n_homes) * 100)
sum(fuel_2021$n_homes)
fuel_summ2 <- fuel_2021 %>%
group_by(Type) %>%
mutate(sum_homes = sum(n_homes) * 100)
# Chunk 1
library(tidyverse)
library(lubridate)
library(tidycensus)
library(urbnmapr)
library(readxl)
library(devtools)
library(usmap)
library(patchwork)
library(maps)
library(kableExtra)
# Chunk 2
# Data from: https://data.census.gov/cedsci/table?q=house%20heating%20fuel%20by%20state&tid=ACSDT1Y2010.B25040&moe=false
fuel <- read_csv("C://Users//matt//Documents//Arbor//Projects//Blog//fuel.csv") %>%
pivot_longer(Alabama:`Puerto Rico`, names_to = "State", values_to = "n_homes")
# Chunk 3
fuel_2021 <- fuel %>%
filter(Type == "Total:" & Year == 2021)
fuel_2021_wood <- fuel %>%
filter(Type == "Wood" & Year == 2021)
# Chunk 4
fuel_summ <- fuel %>%
filter(!Type == "Total:") %>%
group_by(State, Year) %>%
mutate(Pct = n_homes / sum(n_homes) * 100)
sum(fuel_2021$n_homes)
fuel_summ2 <- fuel_2021 %>%
group_by(Type) %>%
mutate(sum_homes = sum(n_homes) * 100)
# Chunk 5
states_map <- map_data("state")
fuel_map <- fuel_summ %>%
mutate(region = tolower(State)) %>%
filter(!State %in% c("Puerto Rico", "District of Columbia") &
Year == 2021 &
Type == "Wood")
fuel_map2 <- inner_join(states_map, fuel_map)
p.map <-  ggplot(fuel_map2, mapping = aes(long, lat, group = group,
fill = Pct)) +
geom_polygon(color = "black", size = 0.25) +
coord_map(projection = "albers", lat0 = 39, lat1 = 45) +
scale_fill_gradient(name="Homes heated \nwith wood (%)", low="white", high="red") +
labs(caption = "Source: American Community Survey , 2021") +
theme(panel.background = element_rect(fill = "NA"),
axis.title = element_blank(),
axis.ticks = element_blank(),
axis.text = element_blank(),
axis.line = element_blank(),
legend.position = c(0.9, 0.4))
p.map
# Chunk 6
fuel_map_trim <- fuel_map %>%
ungroup() %>%
select(State, n_homes, Pct) %>%
rename(Number = n_homes ,
Percent = Pct) %>%
mutate(Percent = round(Percent, 1))
fuel_map_trim[order(fuel_map_trim$Percent, decreasing=TRUE),] %>%
kbl(caption = "Number and percentage of homes that heat with wood, 2021.") %>%
kable_paper("hover", full_width = F)
# Chunk 7
fuel_wood <- fuel %>%
filter(Type == "Wood")
fuel_wood_all <- fuel_wood %>%
group_by(Year) %>%
summarize(num_homes = sum(n_homes))
p.wood <- ggplot(fuel_wood_all, aes(x = Year, y = num_homes/1000000)) +
geom_point() +
geom_line() +
labs(x = "Year",
y = "Number of US homes that heat with wood (millions)",
caption = "Source: American Community Survey data, 2010-2021") +
theme(panel.background = element_rect(fill = "NA"),
axis.line = element_line(color = "black"))
p.wood
# Chunk 8
fuel_solar <- fuel %>%
filter(Type == "Solar energy")
fuel_solar_all <- fuel_solar %>%
group_by(Year) %>%
summarize(num_homes = sum(n_homes))
p.solar <- ggplot(fuel_solar_all, aes(x = Year, y = num_homes/1000000)) +
geom_point() +
geom_line() +
labs(x = "Year",
y = "Number of US homes heated with solar (millions)",
caption = "Source: American Community Survey, 2010-2021") +
theme(panel.background = element_rect(fill = "NA"),
axis.line = element_line(color = "black"))
# Chunk 9
fuel_summ_wood <- fuel_summ %>%
filter(Type == "Wood" & Year %in% c(2011, 2021)) %>%
pivot_wider(id_cols = State, names_from = Year, values_from = Pct, values_fill = 0) %>%
mutate(pct_diff = `2021`-`2011`)
fuel_all <- fuel %>%
filter(!Type == "Total:")
fuel_all <- fuel_all %>%
group_by(Type, Year) %>%
summarize(num_homes = sum(n_homes))
fuel_all2 <- fuel_all %>%
group_by(Year) %>%
mutate(Pct = num_homes / sum(num_homes) * 100)
fuel_all3 <- fuel_all2 %>%
group_by(Year) %>%
summarize(sum_all = sum(Pct))
p.all <- ggplot(fuel_all2, aes(x = Year, y = Pct, col = Type)) +
geom_point() +
geom_line() +
facet_wrap(~Type, ncol = 3) +
labs(x = "Year",
y = "Percent of US homes by home heating type",
caption = "Source: American Community Survey, 2010-2021") +
theme(panel.background = element_rect(fill = "NA"),
axis.line = element_line(color = "black"),
legend.position = "none")
p.all
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
# Chunk 1
library(tidyverse)
library(lubridate)
library(tidycensus)
library(urbnmapr)
library(readxl)
library(devtools)
library(usmap)
library(patchwork)
library(maps)
library(kableExtra)
# Chunk 2
# Data from: https://data.census.gov/cedsci/table?q=house%20heating%20fuel%20by%20state&tid=ACSDT1Y2010.B25040&moe=false
fuel <- read_csv("C://Users//matt//Documents//Arbor//Projects//Blog//fuel.csv") %>%
pivot_longer(Alabama:`Puerto Rico`, names_to = "State", values_to = "n_homes")
# Chunk 3
fuel_2021 <- fuel %>%
filter(Type == "Total:" & Year == 2021)
fuel_2021_wood <- fuel %>%
filter(Type == "Wood" & Year == 2021)
# Chunk 4
fuel_summ <- fuel %>%
filter(!Type == "Total:") %>%
group_by(State, Year) %>%
mutate(Pct = n_homes / sum(n_homes) * 100)
sum(fuel_2021$n_homes)
fuel_summ2 <- fuel_2021 %>%
group_by(Type) %>%
mutate(sum_homes = sum(n_homes) * 100)
blogdown:::serve_site()
blogdown:::new_post_addin()
blogdown:::serve_site()
blogdown::build_site()
blogdown:::serve_site()
blogdown::build_site()
blogdown::build_site()
blogdown:::serve_site()
blogdown::build_site()
blogdown::serve_site()
blogdown:::serve_site()
blogdown::build_site()
blogdown:::serve_site()
blogdown:::update_meta_addin()
blogdown:::serve_site()
blogdown:::serve_site()
